filter(Start_Date>='2015-01-01')%>%
select(BN,School_Year,Indicator_1.1,Indicator_1.2,Indicator_1.3,Indicator_1.4,
Indicator_2.2,Indicator_3.1,Indicator_3.4,Indicator_4.1,Indicator_4.2,Indicator_5.1)
bn_sl <- SL %>% select (BN, location_name)
QR_1519 <- QR_1519 %>%  inner_join(bn_sl, by = c('BN'='BN'))
QR_1519_rename <- QR_1519 %>% rename("Curriculum" = "Indicator_1.1",
"Pedagogy" = "Indicator_1.2",
"Leveraging_Resources" = "Indicator_1.3",
"Positive_Learning_Environment" = "Indicator_1.4",
"Assessment" = "Indicator_2.2",
"Goals_and_Action_Plans" = "Indicator_3.1",
"High_Expectations" = "Indicator_3.4",
"Teacher_Support_Supervision" = "Indicator_4.1",
"Teacher_Team_Leadership_Development" = "Indicator_4.2",
"Monitoring_Revising_Systems" = "Indicator_5.1"
) %>%
replace_with_na_all(condition = ~.x=='No Data')%>%
select(BN,location_name,School_Year,Curriculum,Pedagogy,Leveraging_Resources,
Positive_Learning_Environment,Assessment,Goals_and_Action_Plans,
High_Expectations,Teacher_Support_Supervision,Teacher_Team_Leadership_Development,
Monitoring_Revising_Systems) %>%
mutate (Curriculum = factor(Curriculum),Pedagogy = factor(Pedagogy),
Leveraging_Resources = factor(Leveraging_Resources),
Positive_Learning_Environment = factor(Positive_Learning_Environment),
Assessment = factor(Assessment),Goals_and_Action_Plans = factor(Goals_and_Action_Plans),
High_Expectations = factor(High_Expectations),
Teacher_Support_Supervision = factor(Teacher_Support_Supervision),
Teacher_Team_Leadership_Development = factor(Teacher_Team_Leadership_Development),
Monitoring_Revising_Systems = factor(Monitoring_Revising_Systems),
# change to rating 1 to 5
Curriculum = fct_recode(Curriculum, "1" = "U", "1" = "UD", "2" = "UPF", "3" = "D",
"4" = "P", "5" = "WD", "6" = "O"),
Pedagogy = fct_recode(Pedagogy, "1" = "U", "1" = "UD", "2" = "UPF", "3" = "D",
"4" = "P", "5" = "WD", "6" = "O"),
Leveraging_Resources = fct_recode(Leveraging_Resources, "1" = "U", "1" = "UD", "2" = "UPF",
"3" = "D", "4" = "P", "5" = "WD", "6" = "O"),
Positive_Learning_Environment = fct_recode(Positive_Learning_Environment,
"1" = "U", "1" = "UD","2" = "UPF", "3" = "D",
"4" = "P", "5" = "WD", "6" = "O"),
Assessment = fct_recode(Assessment, "1" = "U", "1" = "UD", "2" = "UPF", "3" = "D",
"4" = "P", "5" = "WD", "6" = "O"),
Goals_and_Action_Plans = fct_recode(Goals_and_Action_Plans, "1" = "U", "1" = "UD", "2" = "UPF",
"3" = "D", "4" = "P", "5" = "WD", "6" = "O"),
High_Expectations = fct_recode(High_Expectations, "1" = "U", "1" = "UD", "2" = "UPF", "3" = "D",
"4" = "P", "5" = "WD", "6"= "O"),
Teacher_Support_Supervision = fct_recode(Teacher_Support_Supervision, "1" = "U", "1" = "UD",
"2" = "UPF", "3" = "D", "4" = "P",
"5" = "WD", "6" = "O"),
Teacher_Team_Leadership_Development = fct_recode(Teacher_Team_Leadership_Development,
"1" = "U", "1" = "UD", "2" = "UPF", "3" = "D",
"4" = "P", "5" = "WD", "6" = "O"),
Monitoring_Revising_Systems = fct_recode(Monitoring_Revising_Systems, "1" = "U", "1" = "UD",
"2" = "UPF", "3" = "D", "4" = "P",
"5" = "WD", "6" = "O")) %>%
pivot_wider(names_from = School_Year,values_from=c(Curriculum:Monitoring_Revising_Systems))%>%
unnest()
save(QR_1519_rename, file="../output/QR_1519_rename.RData")
SS_17 <- read_csv('../data/School Survey 2017.csv')
SS_18 <- read_csv('../data/School Survey 2018.csv')
SS_19 <- read_csv('../data/School Survey 2019.csv')
SS_17 <- SS_17%>%select(DBN,`School Name`,`Collaborative Teachers Score`:`Trust Score`)%>%
replace_with_na_all(condition = ~.x=='N/A')%>%
filter_all(any_vars(!is.na(.)))%>%
rename('17 Collaborative Teachers Score'='Collaborative Teachers Score',
'17 Effective School Leadership Score'=
'Effective School Leadership Score',
'17 Rigorous Instruction Score'='Rigorous Instruction Score',
'17 Supportive Environment Score'='Supportive Environment Score',
'17 Strong Family-Community Ties Score'=
'Strong Family-Community Ties Score',
'17 Trust Score'='Trust Score')
SS_18 <- SS_18%>%select(DBN,`Collaborative Teachers Score`:`Trust Score`)%>%
replace_with_na_all(condition = ~.x=='N/A')%>%
filter_all(any_vars(!is.na(.)))%>%
rename('18 Collaborative Teachers Score'='Collaborative Teachers Score',
'18 Effective School Leadership Score'=
'Effective School Leadership Score',
'18 Rigorous Instruction Score'='Rigorous Instruction Score',
'18 Supportive Environment Score'='Supportive Environment Score',
'18 Strong Family-Community Ties Score'=
'Strong Family-Community Ties Score',
'18 Trust Score'='Trust Score')
SS_19 <- SS_19%>%select(DBN,`Collaborative Teachers Score`:`Trust Score`)%>%
replace_with_na_all(condition = ~.x=='N/A')%>%
filter_all(any_vars(!is.na(.)))%>%
rename('19 Collaborative Teachers Score'='Collaborative Teachers Score',
'19 Effective School Leadership Score'=
'Effective School Leadership Score',
'19 Rigorous Instruction Score'='Rigorous Instruction Score',
'19 Supportive Environment Score'='Supportive Environment Score',
'19 Strong Family-Community Ties Score'=
'Strong Family-Community Ties Score',
'19 Trust Score'='Trust Score')
SS <- SS_17%>%inner_join(SS_18,by='DBN')%>%
inner_join(SS_19,by='DBN')%>%inner_join(select(SL,DBN),by='DBN')%>%
mutate(DBN=str_extract(DBN, '[A-Z][0-9][0-9][0-9]'))%>%rename('BN'='DBN')%>%
arrange(BN)
save(SS, file="../output/School_Survey17-19.RData")
df1 <- SS[c(3,9,15)]
df1 <- data.frame(df1)
indx1 <- which(!is.na(df1), arr.ind=TRUE)
colab_teacher <- df1[cbind(1:nrow(df1),tapply(indx1[,2], indx1[,1], FUN=max))]
df2 <- SS[c(4,10,16)]
df2 <- data.frame(df2)
indx2 <- which(!is.na(df2), arr.ind=TRUE)
eff_sch_leader <- df2[cbind(1:nrow(df2),tapply(indx2[,2], indx2[,1], FUN=max))]
df3 <- SS[c(5,11,17)]
df3 <- data.frame(df3)
indx3 <- which(!is.na(df3), arr.ind=TRUE)
rig_instr <- df3[cbind(1:nrow(df3),tapply(indx3[,2], indx3[,1], FUN=max))]
suprt_env <- SS[6]%>%rename(suprt_env=`17 Supportive Environment Score`)
df5 <- SS[c(7,13,19)]
df5 <- data.frame(df5)
indx5 <- which(!is.na(df5), arr.ind=TRUE)
fam_com_tie <- df5[cbind(1:nrow(df5),tapply(indx5[,2], indx5[,1], FUN=max))]
trust_score <- SS[20]%>%rename(trust_score=`19 Trust Score`)
temp <- cbind(colab_teacher,eff_sch_leader,rig_instr,suprt_env,fam_com_tie,trust_score)
temp <- apply(temp,2,as.character)%>%apply(2,as.numeric)
SS_newest <- cbind(SS[c(1,2)],temp)
save(SS_newest, file="../output/School_Survey_Newest.RData")
demographic_by_borough <- read_csv('../data/demographic/demographic_by_borough.csv')
demographic_by_citywide <- read_csv('../data/demographic/demographic_by_citywide.csv')
demographic_by_school <- read_csv('../data/demographic/demographic_by_school.csv')
demographic_by_district <- read_csv('../data/demographic/demographic_by_district.csv')
demographic_by_school$gradeLevel <- NA
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "no records"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "elementary"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "elementary, middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, high"
demographic_by_school <- demographic_by_school %>% inner_join(bn_sl, by = c('School Name' = 'location_name'))
write.csv('../app1/output/demographic_by_school.csv')
save(demographic_by_school, file="../output/demographic_by_school.RData")
View(demographic_by_school)
runApp()
shiny::runApp()
demographic_by_school$gradeLevel <- NA
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "no records"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "elementary"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "elementary, middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, high"
demographic_by_school <- demographic_by_school %>% inner_join(bn_sl, by = c('School Name' = 'location_name'))
save(demographic_by_school, file="../output/demographic_by_school.RData")
runApp('~/Documents/GitHub/Spring2020-Project2-group-6/app1')
shiny::runApp()
load("/Users/kexinsu/Desktop/Spring2020-Project2-group-6 20.20.17/output/demographic_by_school.RData")
View(demographic_by_school)
library(choroplethr)
library(dplyr)
library(leaflet)
library(maps)
library(rgdal)
library(stringr)
library(shinydashboard)
library(tidyverse)
library(tidyr)
library(naniar)
load('../output/School_Locations.RData')
QR <- read_csv('../data/2005_-_2019_Quality_Review_Ratings.csv')
#SL <- School_Locations%>%filter(Status_descriptions=='Open')%>%
# select(location_code,location_name,location_type_description,Location_Category_Description,
#primary_address_line_1,LONGITUDE,LATITUDE)
QR_1519 <- QR%>%
filter(Start_Date>='2015-01-01')%>%
select(BN,School_Year,Indicator_1.1,Indicator_1.2,Indicator_1.3,Indicator_1.4,
Indicator_2.2,Indicator_3.1,Indicator_3.4,Indicator_4.1,Indicator_4.2,Indicator_5.1)
bn_sl <- SL %>% select (BN, location_name)
QR_1519 <- QR_1519 %>%  inner_join(bn_sl, by = c('BN'='BN'))
QR_1519_rename <- QR_1519 %>% rename("Curriculum" = "Indicator_1.1",
"Pedagogy" = "Indicator_1.2",
"Leveraging_Resources" = "Indicator_1.3",
"Positive_Learning_Environment" = "Indicator_1.4",
"Assessment" = "Indicator_2.2",
"Goals_and_Action_Plans" = "Indicator_3.1",
"High_Expectations" = "Indicator_3.4",
"Teacher_Support_Supervision" = "Indicator_4.1",
"Teacher_Team_Leadership_Development" = "Indicator_4.2",
"Monitoring_Revising_Systems" = "Indicator_5.1"
) %>%
replace_with_na_all(condition = ~.x=='No Data')%>%
select(BN,location_name,School_Year,Curriculum,Pedagogy,Leveraging_Resources,
Positive_Learning_Environment,Assessment,Goals_and_Action_Plans,
High_Expectations,Teacher_Support_Supervision,Teacher_Team_Leadership_Development,
Monitoring_Revising_Systems) %>%
mutate (Curriculum = factor(Curriculum),Pedagogy = factor(Pedagogy),
Leveraging_Resources = factor(Leveraging_Resources),
Positive_Learning_Environment = factor(Positive_Learning_Environment),
Assessment = factor(Assessment),Goals_and_Action_Plans = factor(Goals_and_Action_Plans),
High_Expectations = factor(High_Expectations),
Teacher_Support_Supervision = factor(Teacher_Support_Supervision),
Teacher_Team_Leadership_Development = factor(Teacher_Team_Leadership_Development),
Monitoring_Revising_Systems = factor(Monitoring_Revising_Systems),
# change to rating 1 to 5
Curriculum = fct_recode(Curriculum, "1" = "U", "1" = "UD", "2" = "UPF", "3" = "D",
"4" = "P", "5" = "WD", "6" = "O"),
Pedagogy = fct_recode(Pedagogy, "1" = "U", "1" = "UD", "2" = "UPF", "3" = "D",
"4" = "P", "5" = "WD", "6" = "O"),
Leveraging_Resources = fct_recode(Leveraging_Resources, "1" = "U", "1" = "UD", "2" = "UPF",
"3" = "D", "4" = "P", "5" = "WD", "6" = "O"),
Positive_Learning_Environment = fct_recode(Positive_Learning_Environment,
"1" = "U", "1" = "UD","2" = "UPF", "3" = "D",
"4" = "P", "5" = "WD", "6" = "O"),
Assessment = fct_recode(Assessment, "1" = "U", "1" = "UD", "2" = "UPF", "3" = "D",
"4" = "P", "5" = "WD", "6" = "O"),
Goals_and_Action_Plans = fct_recode(Goals_and_Action_Plans, "1" = "U", "1" = "UD", "2" = "UPF",
"3" = "D", "4" = "P", "5" = "WD", "6" = "O"),
High_Expectations = fct_recode(High_Expectations, "1" = "U", "1" = "UD", "2" = "UPF", "3" = "D",
"4" = "P", "5" = "WD", "6"= "O"),
Teacher_Support_Supervision = fct_recode(Teacher_Support_Supervision, "1" = "U", "1" = "UD",
"2" = "UPF", "3" = "D", "4" = "P",
"5" = "WD", "6" = "O"),
Teacher_Team_Leadership_Development = fct_recode(Teacher_Team_Leadership_Development,
"1" = "U", "1" = "UD", "2" = "UPF", "3" = "D",
"4" = "P", "5" = "WD", "6" = "O"),
Monitoring_Revising_Systems = fct_recode(Monitoring_Revising_Systems, "1" = "U", "1" = "UD",
"2" = "UPF", "3" = "D", "4" = "P",
"5" = "WD", "6" = "O")) %>%
pivot_wider(names_from = School_Year,values_from=c(Curriculum:Monitoring_Revising_Systems))%>%
unnest()
save(QR_1519_rename, file="../output/QR_1519_rename.RData")
SS_17 <- read_csv('../data/School Survey 2017.csv')
SS_18 <- read_csv('../data/School Survey 2018.csv')
SS_19 <- read_csv('../data/School Survey 2019.csv')
SS_17 <- SS_17%>%select(DBN,`School Name`,`Collaborative Teachers Score`:`Trust Score`)%>%
replace_with_na_all(condition = ~.x=='N/A')%>%
filter_all(any_vars(!is.na(.)))%>%
rename('17 Collaborative Teachers Score'='Collaborative Teachers Score',
'17 Effective School Leadership Score'=
'Effective School Leadership Score',
'17 Rigorous Instruction Score'='Rigorous Instruction Score',
'17 Supportive Environment Score'='Supportive Environment Score',
'17 Strong Family-Community Ties Score'=
'Strong Family-Community Ties Score',
'17 Trust Score'='Trust Score')
SS_18 <- SS_18%>%select(DBN,`Collaborative Teachers Score`:`Trust Score`)%>%
replace_with_na_all(condition = ~.x=='N/A')%>%
filter_all(any_vars(!is.na(.)))%>%
rename('18 Collaborative Teachers Score'='Collaborative Teachers Score',
'18 Effective School Leadership Score'=
'Effective School Leadership Score',
'18 Rigorous Instruction Score'='Rigorous Instruction Score',
'18 Supportive Environment Score'='Supportive Environment Score',
'18 Strong Family-Community Ties Score'=
'Strong Family-Community Ties Score',
'18 Trust Score'='Trust Score')
SS_19 <- SS_19%>%select(DBN,`Collaborative Teachers Score`:`Trust Score`)%>%
replace_with_na_all(condition = ~.x=='N/A')%>%
filter_all(any_vars(!is.na(.)))%>%
rename('19 Collaborative Teachers Score'='Collaborative Teachers Score',
'19 Effective School Leadership Score'=
'Effective School Leadership Score',
'19 Rigorous Instruction Score'='Rigorous Instruction Score',
'19 Supportive Environment Score'='Supportive Environment Score',
'19 Strong Family-Community Ties Score'=
'Strong Family-Community Ties Score',
'19 Trust Score'='Trust Score')
SS <- SS_17%>%inner_join(SS_18,by='DBN')%>%
inner_join(SS_19,by='DBN')%>%inner_join(select(SL,DBN),by='DBN')%>%
mutate(DBN=str_extract(DBN, '[A-Z][0-9][0-9][0-9]'))%>%rename('BN'='DBN')%>%
arrange(BN)
save(SS, file="../output/School_Survey17-19.RData")
df1 <- SS[c(3,9,15)]
df1 <- data.frame(df1)
indx1 <- which(!is.na(df1), arr.ind=TRUE)
colab_teacher <- df1[cbind(1:nrow(df1),tapply(indx1[,2], indx1[,1], FUN=max))]
df2 <- SS[c(4,10,16)]
df2 <- data.frame(df2)
indx2 <- which(!is.na(df2), arr.ind=TRUE)
eff_sch_leader <- df2[cbind(1:nrow(df2),tapply(indx2[,2], indx2[,1], FUN=max))]
df3 <- SS[c(5,11,17)]
df3 <- data.frame(df3)
indx3 <- which(!is.na(df3), arr.ind=TRUE)
rig_instr <- df3[cbind(1:nrow(df3),tapply(indx3[,2], indx3[,1], FUN=max))]
suprt_env <- SS[6]%>%rename(suprt_env=`17 Supportive Environment Score`)
df5 <- SS[c(7,13,19)]
df5 <- data.frame(df5)
indx5 <- which(!is.na(df5), arr.ind=TRUE)
fam_com_tie <- df5[cbind(1:nrow(df5),tapply(indx5[,2], indx5[,1], FUN=max))]
trust_score <- SS[20]%>%rename(trust_score=`19 Trust Score`)
temp <- cbind(colab_teacher,eff_sch_leader,rig_instr,suprt_env,fam_com_tie,trust_score)
temp <- apply(temp,2,as.character)%>%apply(2,as.numeric)
SS_newest <- cbind(SS[c(1,2)],temp)
save(SS_newest, file="../output/School_Survey_Newest.RData")
demographic_by_borough <- read_csv('../data/demographic/demographic_by_borough.csv')
demographic_by_citywide <- read_csv('../data/demographic/demographic_by_citywide.csv')
demographic_by_school <- read_csv('../data/demographic/demographic_by_school.csv')
demographic_by_district <- read_csv('../data/demographic/demographic_by_district.csv')
demographic_by_school$gradeLevel <- NA
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "no records"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "elementary"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "elementary, middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, high"
demographic_by_school <- demographic_by_school %>% inner_join(bn_sl, by = c('School Name' = 'location_name'))
save(demographic_by_school, file="../output/demographic_by_school.RData")
load('../output/qr_processed.RData')
load('../output/qr_processed.RData')
load("/Users/kexinsu/Desktop/Spring2020-Project2-group-6 20.20.17/output/qr_processed.RData")
qr_processed
load('../output/qr_processed.RData')
View(df)
demographic_by_school <- demographic_by_school %>% inner_join(bn_sl, by = c('School Name' = 'location_name'))%>%mutate(DBN=str_extract(DBN, '[A-Z][0-9][0-9][0-9]'))%>%rename('BN'='DBN')%>%
arrange(BN)
demographic_by_borough <- read_csv('../data/demographic/demographic_by_borough.csv')
library(choroplethr)
library(dplyr)
library(leaflet)
library(maps)
library(rgdal)
library(stringr)
library(shinydashboard)
library(tidyverse)
library(tidyr)
library(naniar)
demographic_by_borough <- read_csv('../data/demographic/demographic_by_borough.csv')
demographic_by_citywide <- read_csv('../data/demographic/demographic_by_citywide.csv')
demographic_by_school <- read_csv('../data/demographic/demographic_by_school.csv')
demographic_by_district <- read_csv('../data/demographic/demographic_by_district.csv')
load('../output/qr_processed.RData')
demographic_by_school$gradeLevel <- NA
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "no
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "elementary"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "elementary"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "elementary, middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, high"
demographic_by_school <- demographic_by_school %>% inner_join(bn_sl, by = c('School Name' = 'location_name'))%>%mutate(DBN=str_extract(DBN, '[A-Z][0-9][0-9][0-9]'))%>%rename('BN'='DBN')%>%
arrange(BN)
demographic_by_school <- demographic_by_school %>% inner_join(bn_sl, by = c('School Name' = 'location_name'))%>%mutate(DBN=str_extract(DBN, '[A-Z][0-9][0-9][0-9]'))%>%rename('BN'='DBN')
demographic_by_school
demographic_by_school$gradeLevel <- NA
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "no records"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "elementary"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "elementary, middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, high"
demographic_by_school <- demographic_by_school %>%mutate(DBN=str_extract(DBN, '[A-Z][0-9][0-9][0-9]'))%>%rename('BN'='DBN')%>% inner_join(bn_sl, by = c('School Name' = 'location_name'))
demographic_by_school <- demographic_by_school %>%mutate(DBN=str_extract(DBN, '[A-Z][0-9][0-9][0-9]'))%>%rename('BN'='DBN')%>% inner_join(bn_sl, by = c('School Name' = 'location_name'))
demographic_by_school
demographic_by_school <- demographic_by_school %>%mutate(DBN=str_extract(DBN, '[A-Z][0-9][0-9][0-9]'))%>%rename('BN'='DBN')#%>% inner_join(bn_sl, by = c('School Name' = 'location_name'))
demographic_by_school <- demographic_by_school %>%mutate(DBN=str_extract(DBN, '[A-Z][0-9][0-9][0-9]'))%>%rename('BN'='DBN')#%>% inner_join(bn_sl, by = c('School Name' = 'location_name'))
demographic_by_school
demographic_by_school$gradeLevel <- NA
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "no records"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "elementary"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "elementary, middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, high"
demographic_by_school <- demographic_by_school%>% inner_join(bn_sl, by = c('School Name' = 'location_name'))
demographic_by_school
demographic_by_borough <- read_csv('../data/demographic/demographic_by_borough.csv')
demographic_by_citywide <- read_csv('../data/demographic/demographic_by_citywide.csv')
demographic_by_school <- read_csv('../data/demographic/demographic_by_school.csv')
demographic_by_district <- read_csv('../data/demographic/demographic_by_district.csv')
load('../output/qr_processed.RData')
demographic_by_school$gradeLevel <- NA
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "no records"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "elementary"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "elementary, middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, high"
demographic_by_school1 <- demographic_by_school%>% inner_join(bn_sl, by = c('School Name' = 'location_name'))
demographic_by_school1
demographic_by_school1 <- demographic_by_school%>% inner_join(bn_sl, by = c('School Name' = 'location_name'))
load("/Users/kexinsu/Desktop/Spring2020-Project2-group-6 20.20.17/output/demographic_by_school.RData")
demographic_by_school2 <- df%>%select(BN)%>%inner_join(demographic_by_school1,by=BN)
demographic_by_school2 <- df%>%select(BN)%>%inner_join(demographic_by_school1,by='BN')
demographic_by_school2
demographic_by_school2 <- df%>%select(BN)%>%left_join(demographic_by_school1,by='BN')
demographic_by_school2
demographic_by_school1 <- demographic_by_school%>% inner_join(bn_sl, by = c('School Name' = 'location_name'))
demographic_by_school2 <- df%>%select(BN)%>%left_join(demographic_by_school1,by='BN')
demographic_by_school$gradeLevel <- NA
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "no records"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "elementary"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "elementary, middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, high"
demographic_by_school1 <- demographic_by_school%>% inner_join(bn_sl, by = c('School Name' = 'location_name'))
demographic_by_school1
demographic_by_borough <- read_csv('../data/demographic/demographic_by_borough.csv')
demographic_by_citywide <- read_csv('../data/demographic/demographic_by_citywide.csv')
demographic_by_school <- read_csv('../data/demographic/demographic_by_school.csv')
demographic_by_district <- read_csv('../data/demographic/demographic_by_district.csv')
load('../output/qr_processed.RData')
demographic_by_school$gradeLevel <- NA
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "no records"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` == 0] <- "elementary"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "elementary, middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` == 0] <- "middle"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` != 0 & demographic_by_school$`Grade 9` != 0] <- "middle, high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` == 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "high"
demographic_by_school$gradeLevel[demographic_by_school$`Grade 1` != 0 & demographic_by_school$`Grade 6` == 0 & demographic_by_school$`Grade 9` != 0] <- "elementary, high"
demographic_by_school1 <- demographic_by_school%>% inner_join(bn_sl, by = c('School Name' = 'location_name'))
demographic_by_school1
View(df)
demographic_by_school2 <- df%>%select(BN)%>%inner_join(demographic_by_school1,by='BN')
demographic_by_school1 <- demographic_by_school%>% inner_join(bn_sl, by = c('School Name' = 'location_name'))%>%group_by(BN)
demographic_by_school1
hi1 <- demographic_by_school1%>%group_by(BN)%>%summarise(count=n())
hi1
hi1 <- demographic_by_school1%>%group_by(BN)%>%summarise(count=n())%>%
inner_join(lil_bn)
lil_bn <- df%>%select(BN)
hi1 <- demographic_by_school1%>%group_by(BN)%>%summarise(count=n())%>%
inner_join(lil_bn)
hi1
hi1 <- demographic_by_school1%>%group_by(BN)%>%summarise(count=n())%>%
inner_join(lil_bn)%>%ungroup()
hi1 <- demographic_by_school1%>%group_by(BN)%>%summarise(count=n())%>%
inner_join(lil_bn)%>%ungroup()
hi1
hi1 <- demographic_by_school1%>%group_by(BN)%>%summarise(count=n())%>%
inner_join(lil_bn)%>%ungroup(BN)
hi1
hi1 <- demographic_by_school1%>%group_by(BN)%>%summarise(count=n())%>%
inner_join(lil_bn)%>%ungroup()
hi1
hi1 <- demographic_by_school1%>%group_by(BN)%>%
inner_join(lil_bn)%>%ungroup()
hi1 <- demographic_by_school1%>%group_by(BN)%>%summarise(count=n())%>%
inner_join(lil_bn)%>%select(BN)
hi1
demographic_by_school2 <- lil_bn%>%inner_join(demographic_by_school1,by='BN')
demographic_by_school2
hi1 <- demographic_by_school1%>%group_by(BN)%>%summarise(count=n())%>%
inner_join(lil_bn)%>%select(BN)%>%as.factor(BN)
hi1 <- demographic_by_school1%>%group_by(BN)%>%summarise(count=n())%>%
inner_join(lil_bn)%>%select(BN)%>%as.factor()
hi1 <- demographic_by_school1%>%group_by(BN)%>%summarise(count=n())%>%
inner_join(lil_bn)%>%select(BN)
hi1
hi1 <- demographic_by_school1%>%group_by(BN)%>%summarise(count=n())%>%
inner_join(lil_bn)%>%select(BN)%>%mutate(BN=as.factor(BN))
hi1
selected_BN <- demographic_by_school1%>%group_by(BN)%>%summarise(count=n())%>%
inner_join(lil_bn)%>%select(BN)%>%mutate(BN=as.factor(BN))
save(selected_BN, file="../output/selected_BN.RData")
shiny::runApp('~/Documents/GitHub/Spring2020-Project2-group-6/app1')
load("/Users/kexinsu/Documents/GitHub/Spring2020-Project2-group-6/app1/finalsummary.RData")
load("/Users/kexinsu/Documents/GitHub/Spring2020-Project2-group-6/app1/schoolfinal.RData")
load("/Users/kexinsu/Documents/GitHub/Spring2020-Project2-group-6/app1/zip_code.RData")
load("/Users/kexinsu/Documents/GitHub/Spring2020-Project2-group-6/app1/output/house_processed.RData")
load("/Users/kexinsu/Documents/GitHub/Spring2020-Project2-group-6/app1/output/QR_1519_rename.RData")
load("/Users/kexinsu/Documents/GitHub/Spring2020-Project2-group-6/app1/output/School_Survey_Cleaned.RData")
load("/Users/kexinsu/Documents/GitHub/Spring2020-Project2-group-6/app1/output/School_Survey_Newest.RData")
load("/Users/kexinsu/Documents/GitHub/Spring2020-Project2-group-6/app1/output/School_Locations.RData")
load("/Users/kexinsu/Documents/GitHub/Spring2020-Project2-group-6/app1/output/demographic_by_school.RData")
load("/Users/kexinsu/Documents/GitHub/Spring2020-Project2-group-6/app1/output/house_processed.RData")
load("/Users/kexinsu/Documents/GitHub/Spring2020-Project2-group-6/app1/output/tidied_price.RData")
runApp('~/Documents/GitHub/Spring2020-Project2-group-6/app1')
runApp('~/Documents/GitHub/Spring2020-Project2-group-6/app1')
runApp('~/Documents/GitHub/Spring2020-Project2-group-6/app1')
runApp('~/Documents/GitHub/Spring2020-Project2-group-6/app1')
school_survey_hist1 <- function(bn){
test<-S %>% filter(BN == bn) %>% na.omit()
ggplot(test,aes(c("Collaborative Teachers","Effective School Leadership","Rigorous Instruction",
"Supportive Environment","Strong Family-Community Ties",'Trust Score'), as.numeric(value))) +
geom_col(aes(fill = as.factor(Year)),
width = 0.8,
position = position_dodge2(width = 0.8, preserve = "single")) +
ylab("Score") +
xlab("Score Criteria") +
ylim(0,5) +
labs(fill = "Year") +
theme(axis.text.x = element_text(angle = 20, hjust = 1)) +
geom_text(aes(label = value),position = position_dodge2(width = 0.8, preserve = "single"))
}
school_survey_hist1('K001')
school_survey_hist1 <- function(bn){
test<-S %>% filter(BN == bn) %>% na.omit()
ggplot(test,aes(c("Collaborative Teachers","Effective School Leadership","Rigorous Instruction",
"Supportive Environment","Strong Family-Community Ties",'Trust Score'), as.numeric(value))) +
geom_col(aes(fill = as.factor(Year)),
width = 0.8,
position = position_dodge2(width = 0.8, preserve = "single")) +
ylab("Score") +
xlab("Score Criteria") +
ylim(0,5) +
labs(fill = "Year") +
theme(axis.text.x = element_text(angle = 20, hjust = 1)) +
geom_text(aes(label = value),position = position_dodge2(width = 0.8, preserve = "single"))
}
View(S)
runApp('~/Documents/GitHub/Spring2020-Project2-group-6/app1')
runApp('~/Documents/GitHub/Spring2020-Project2-group-6/app1')
